rubies:
  jruby:
    version: jruby-9.0.0.0.rc1
    alias: jruby-9000
  mri:
    version: 2.1.5
    alias: ruby-2.1


madek_host_name: '{{ host_name | default(ansible_default_ipv4.address) }}'
madek_webapp_context_name: '{{madek_webapp_context | regex_replace("^\/$","root") | replace("/","_") | regex_replace("^_+(.*)$","\\1") }}'
madek_webapp_name: '{{madek_host_name | lower | regex_replace("[^a-zA-Z0-9]","_") | regex_replace("_+","_") }}_{{madek_webapp_context_name}}'

madek_configuration_management_url: 'http://localhost:{{madek_webapp_port}}{{madek_webapp_context}}/configuration_management_backdoor/invoke'

madek_user: madek_{{madek_webapp_name}}
madek_root_dir: '/var/local/madek_{{madek_webapp_name}}'
madek_webapp_dir: "{{madek_root_dir}}/webapp"
rails_env: production

### global defaults ############################################################


# can be overridden
database_password: madek

# database
database:
  user: madek_{{madek_webapp_name}}
  password: "{{database_password}}"
  hostname: localhost
  port: 5432
  name: madek-v3_{{madek_webapp_name}}_production
  pool: 25

